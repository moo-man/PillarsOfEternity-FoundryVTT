<ol class="items-list power-sources">
    <li class="items-header flexrow">
        <h3 class="item-name flexrow">{{localize "PILLARS.PowerSources"}}</h3>
        <span class="item-property-column flex"></span>
        <span class="item-property-column large">{{localize "PILLARS.Pool"}}</span>
        <span class="item-property-column">{{localize "PILLARS.Attack"}}</span>
        <span class="item-property-column">{{localize "PILLARS.XP"}}</span>
        <span class="item-property-column">{{localize "PILLARS.Level"}}</span>
        <div class="item-controls">
            <a class="item-control item-create" title="Create" data-type="powerSource"><i class="fas fa-plus"></i></a>
        </div>
    </li>

    <ol class="items">
        {{#each items.powerSources as |item i|}}
        <li class="item" draggable="true" data-item-id="{{item.id}}">
            <div class="row-content">

            {{#if item.system.used.value}}
            <a class="item-toggle item-used sheet-checkbox" data-target="item" data-item-target="system.used.value"><i class="far fa-check-circle"></i></a>
            {{else}}
            <a class="item-toggle item-used sheet-checkbox" data-target="item" data-item-target="system.used.value"><i class="far fa-circle"></i></a>
            {{/if}}

            <div class="item-name flexrow item-dropdown">
                <a>
                    <h4>{{item.name}}</h4>
                </a>
            </div>

            <span class="item-property-column flex">
                <div class="progress-bar">
                    <div class="progress-bar-container">
                        <div class="progress" style="width: {{pct item.system.pool.current item.system.pool.max}}%"></div>
                    </div>
                </div>
                <a title="Restore Pool" class="restore-pool"><i class="fas fa-redo"></i></a>
            </span>
            <span class="item-property-column large pool-inputs"><input class="item-property" data-target="system.pool.current" type="number" value="{{item.system.pool.current}}"  > / <input class="item-property" data-target="system.pool.max" type="number" disabled value="{{item.system.pool.max}}" ></span>
            <span class="item-property-column">+{{item.system.attack}}</span>
            <span class="item-property-column"><input type="number" class="item-property" data-target="system.xp.value" value="{{item.system.xp.value}}"></span>
            <span class="item-property-column"><input type="number" class="item-property" disabled value="{{item.system.xp.level}}"></span>

            <div class="item-controls flexrow">
                {{#if ../owner}}
                <a class="item-control item-post" title="Post Item"><i class="fas fa-comment"></i></a>
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-dropdown" title="Dropdown"><i class="fas fa-chevron-down"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                {{/if}}
            </div>
            </div>
        </li>
        {{/each}}
    </ol>
</ol>

<ol class="items-list powers-list">
    <li class="items-header flexrow">
        <h3 class="item-name flexrow">Powers</h3>
        <span class="displayGroup"></span>
        <span class="item-property-column small">{{localize "PILLARS.Level"}}</span>
        <!-- <span class="item-property-column">Dmg</span> -->
        <span class="item-property-column small">{{localize "PILLARS.Range"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Target"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Duration"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Speed"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Exclusion"}}</span>
        <div class="item-controls">
            <a class="item-control item-create" title="Create" data-type="power"><i class="fas fa-plus"></i></a>
        </div>
    </li>

    <ol class="items">
        {{#each items.powers as |item i|}}
        <li class="item" draggable="true" data-item-id="{{item.id}}">
            <div class="row-content">
            <div class="item-name flexrow power-roll item-dropdown-alt">
                <div class="item-image" style="background-image: url('{{item.img}}')"></div>
                <a>
                    <h4>{{item.name}}</h4>
                </a>
            </div>


            {{#if item.currentDisplayGroup}}
            <a class="displayGroup" style="flex:0; opacity: 0.5; margin-top: 12px;">({{item.currentDisplayGroup}})</a>
            {{else}}
            <a class="displayGroup" style="flex:0; opacity: 0.5; margin-top: 12px;">(Default)</a>
            {{/if}}

            <!--<span class="item-property-column flex">Base Effects</span>-->
            <span class="item-property-column small" {{item.system.level.value}} {{#if item.system.improvised.value}} title="Improvised Cost" {{/if}}>{{item.system.level.value}} {{#if item.system.improvised.value}} ({{item.system.level.cost}}) {{/if}}</span>
        <!-- {{#if item.damage.value.length}}
        <button type = "button" class="item-property-column damage-roll">Roll</button>
        {{else}}
        <div class="item-property-column">None</div>
        {{/if}} -->
            <span class="item-property-column small">{{item.Range}}</span>
            <a class="item-property-column small power-target">{{item.Target}}</a>
            <span class="item-property-column small">{{item.Duration}}</span>
            <span class="item-property-column small">{{item.Speed}}</span>
            <span class="item-property-column small">{{item.Exclusion}}</span>

            <div class="item-controls flexrow">
                {{#if ../owner}}
                <a class="item-control item-post" title="Post Item"><i class="fas fa-comment"></i></a>
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-dropdown" title="Dropdown"><i class="fas fa-chevron-down"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                {{/if}}
            </div>
            </div>
        </li>
        {{/each}}
    </ol>
</ol>
    {{#if items.embeddedPowers.length}}
    <ol class="items-list powers-list">
    <li class="items-header flexrow">
        <span class="item-property-column"></span>
        <h3 class="item-name flexrow">{{localize "PILLARS.ItemPowers"}}</h3>
        <span class="displayGroup"></span>
        <span class="item-property-column small">{{localize "PILLARS.Level"}}</span>
        <!-- <span class="item-property-column">Dmg</span> -->
        <span class="item-property-column small">{{localize "PILLARS.Range"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Target"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Duration"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Speed"}}</span>
        <span class="item-property-column small">{{localize "PILLARS.Exclusion"}}</span>
        <div class="item-controls">
           
        </div>
    </li>

    <ol class="items">
        {{#each items.embeddedPowers as |item i|}}
        <li class="item" draggable="true" data-item-id="{{item.id}}">
            <div class="row-content">
            <div class="item-name flexrow power-roll item-dropdown-alt">
                <div class="item-image" style="background-image: url('{{item.img}}')"></div>
                <a>
                    <h4>{{item.name}}</h4>
                </a>
            </div>

            <a class="item-property-column embedded-value" style="opacity: 0.5">{{item.EmbeddedDisplay}}</a>

            {{#if item.currentDisplayGroup}}
            <a class="displayGroup" style="flex:0; opacity: 0.5; margin-top: 12px;">({{item.currentDisplayGroup}})</a>
            {{else}}
            <a class="displayGroup" style="flex:0; opacity: 0.5; margin-top: 12px;">(Default)</a>
            {{/if}}

            <!--<span class="item-property-column flex">Base Effects</span>-->
            <span class="item-property-column small" {{item.system.level.value}} {{#if item.improvised.value}} title="Improvised Cost" {{/if}}>{{item.system.level.value}} {{#if item.improvised.value}} ({{item.system.level.cost}}) {{/if}}</span>
        <!-- {{#if item.damage.value.length}}
        <button type = "button" class="item-property-column damage-roll">Roll</button>
        {{else}}
        <div class="item-property-column">None</div>
        {{/if}} -->
            <span class="item-property-column small">{{item.Range}}</span>
            <a class="item-property-column small power-target">{{item.Target}}</a>
            <span class="item-property-column small">{{item.Duration}}</span>
            <span class="item-property-column small">{{item.Speed}}</span>
            <span class="item-property-column small">{{item.Exclusion}}</span>

            <div class="item-controls flexrow">
                {{#if ../owner}}
                <a class="item-control item-post" title="Post Item"><i class="fas fa-comment"></i></a>
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-dropdown" title="Dropdown"><i class="fas fa-chevron-down"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                {{/if}}
            </div>
            </div>
        </li>
        {{/each}}
    </ol>
</ol>
{{/if}}